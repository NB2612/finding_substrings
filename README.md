# Поиск подстрок в тексте (KMP / BM / Aho-Corasick)

Проект реализует **поиск подстрок в тексте** с использованием трёх алгоритмов:
- **KMP (Knuth-Morris-Pratt)** — линейный поиск с использованием префикс-функции.
- **BM (Boyer-Moore)** — эффективный алгоритм для поиска одной подстроки с использованием правила плохого символа.
- **AK (Aho-Corasick)** — поиск нескольких подстрок одновременно, строится Trie и суффиксные ссылки.

Поддерживается:
- Чувствительность к регистру.
- Поиск с начала (`first`) или с конца (`last`).
- Ограничение на количество найденных вхождений.
- Поиск одной или нескольких подстрок.
- Цветная подсветка найденных подстрок в консоли.

---

## Файлы проекта

- `search.py` — основной модуль поиска подстрок.
- `main.py` — консольная утилита для поиска в тексте или файле с подсветкой.

---

## Установка

1. Клонируйте репозиторий:

```bash
git clone https://github.com/NB2612/finding_substrings.git
cd finding_substrings
````

2. Установите зависимости (для цветного вывода в консоли):

```bash
pip install termcolor
```

---

## Использование консольной утилиты `main.py`

### Поиск в строке

```bash
python main.py -t "abracadabra" -s "abra" "cad" -a ak -c
```

* `-t` — текст для поиска.
* `-s` — список подстрок для поиска.
* `-a` — алгоритм поиска (`kmp`, `bm`, `ak`).
* `-c` — учитывать регистр.

### Поиск в файле

```bash
python main.py -f example.txt -s "error" "warning" -a ak -m first -n 5
```

* `-f` — путь до файла для поиска.
* `-m` — метод поиска (`first` или `last`).
* `-n` — максимальное количество совпадений.

### Ограничение по количеству строк

```bash
python main.py -f example.txt -s "pattern" -l 10
```

* `-l` — вывод первых N строк текста с подсветкой найденных подстрок (по умолчанию 10).

---

## Примеры использования

1. **Поиск одной подстроки в строке (без учета регистра):**

```bash
python main.py -t "Hello world, hello Python" -s "hello" -a kmp
```

2. **Поиск нескольких подстрок с подсветкой цветов:**

```bash
python main.py -t "abracadabra, alakazam, abracadabra" -s "abra" "ala" -a ak
```

3. **Поиск с конца текста (`last`) и ограничением количества совпадений:**

```bash
python main.py -f log.txt -s "ERROR" "WARNING" -m last -n 3
```

4. **Учитываем регистр при поиске нескольких подстрок:**

```bash
python main.py -t "Python python PyThOn" -s "Python" "pyth" -c
```

---

## Особенности

* Алгоритм **Aho-Corasick** автоматически выбирается, если ищется более одной подстроки.
* Цветная подсветка: каждая подстрока — свой цвет (красный, зеленый, желтый, синий, магента, циан).
* Поддерживается вывод только первых N строк файла для удобного просмотра.

---

## Зависимости

* Python 3.8+
* `termcolor` — для цветного выделения в консоли

```bash
pip install termcolor
```